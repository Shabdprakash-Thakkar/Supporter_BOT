<!-- v5.0.0 -->
<!-- v4.0.0 -->
<!-- Ticket System Configuration Tab -->
<div class="space-y-8">
    <!-- Header -->
    <div class="flex items-center justify-between">
        <div>
            <h2 class="text-2xl font-black flex items-center gap-3">
                <i class="fas fa-ticket-alt text-cyan-400"></i>
                Ticket System Configuration
            </h2>
            <p class="text-slate-400 text-sm mt-1">
                Configure support ticket channels, messages, and permissions
            </p>
        </div>
        <a href="/dashboard/tickets/{{ server.id }}" target="_blank"
            class="px-4 py-2 bg-cyan-500/10 hover:bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 rounded-lg text-sm font-bold transition-all hover:scale-105">
            <i class="fas fa-list mr-2"></i>View Transcripts
        </a>
    </div>

    <!-- Configuration Form -->
    <div class="glass-surface rounded-2xl p-8 border border-white/5 space-y-8 shadow-2xl relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-blue-600"></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Ticket Channel -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-hashtag text-cyan-400"></i> Ticket Button Channel
                </label>
                <select id="ticketChannel"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white">
                    <option value="">Select channel...</option>
                </select>
                <p class="text-[10px] text-slate-500 italic">
                    Where the "Create Ticket" button will be posted
                </p>
            </div>

            <!-- Ticket Category -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-folder text-cyan-400"></i> Ticket Category
                </label>
                <select id="ticketCategory"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white">
                    <option value="">Select category...</option>
                </select>
                <p class="text-[10px] text-slate-500 italic">
                    Category for new ticket channels
                </p>
            </div>

            <!-- Staff Role -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-user-shield text-cyan-400"></i> Staff/Support Role
                </label>
                <select id="ticketStaffRole"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white">
                    <option value="">Select role...</option>
                </select>
                <p class="text-[10px] text-slate-500 italic">
                    Role that can access all tickets
                </p>
            </div>

            <!-- Transcript Channel (Optional) -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-file-alt text-cyan-400"></i> Transcript Log Channel
                </label>
                <select id="ticketTranscriptChannel"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white">
                    <option value="">None - Don't log transcripts</option>
                </select>
                <p class="text-[10px] text-slate-500 italic">
                    Optional: Where closed ticket logs are sent
                </p>
            </div>
        </div>

        <div class="space-y-6 pt-6 border-t border-white/5">
            <!-- Initial Message (Button Message) -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-comment text-cyan-400"></i> Initial Message (Button Text)
                </label>
                <textarea id="ticketInitialMessage" rows="2"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white font-mono text-sm resize-none"
                    placeholder="Click the button below to open a support ticket."></textarea>
            </div>

            <!-- Welcome Message (Ticket Greeting) -->
            <div class="space-y-2">
                <label class="block text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-envelope-open-text text-cyan-400"></i> Welcome Message (Ticket Greet)
                </label>
                <textarea id="ticketWelcomeMessage" rows="3"
                    class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 focus:outline-none transition-all text-white font-mono text-sm resize-none"
                    placeholder="Hello {user}, support will be with you shortly..."></textarea>

                <div
                    class="flex items-center gap-3 mt-3 px-4 py-2 bg-slate-900/30 rounded-lg border border-white/5 w-fit">
                    <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Insert:</span>
                    <div class="flex gap-2">
                        <span class="var-badge" onclick="insertTicketVar('{user}')">{user}</span>
                        <span class="var-badge" onclick="insertTicketVar('{ticket_id}')">{ticket_id}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Save Button -->
        <div class="flex justify-end gap-3 pt-6 border-t border-white/5">
            <button onclick="loadTicketConfig()"
                class="px-6 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-all font-bold text-sm">
                <i class="fas fa-undo mr-2"></i>Reset
            </button>
            <button onclick="saveTicketConfig()"
                class="bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white px-8 py-2 rounded-xl font-black text-sm transition-all shadow-lg shadow-cyan-500/20 active:scale-95 flex items-center gap-2">
                <i class="fas fa-save"></i>
                Save Configuration
            </button>
        </div>
    </div>

    <!-- Info Box -->
    <div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-4">
        <div class="flex gap-3">
            <i class="fas fa-info-circle text-blue-400 text-xl mt-0.5"></i>
            <div class="text-sm text-blue-200">
                <p class="font-bold mb-1">How the Ticket System Works:</p>
                <ul class="list-disc list-inside space-y-1 text-blue-300/80">
                    <li>Users click the button in the ticket channel to create a support ticket</li>
                    <li>A private text AND voice channel is created for the user and staff</li>
                    <li>Tickets automatically close after 6 hours of inactivity</li>
                    <li>Full conversation transcripts are saved when tickets close</li>
                    <li>You can also use the <code class="bg-blue-900/30 px-1 rounded">/tt1-setup</code> slash command
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    .var-badge {
        display: inline-block;
        padding: 4px 10px;
        background: rgba(34, 211, 238, 0.15);
        border: 1px solid rgba(34, 211, 238, 0.3);
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        font-size: 12px;
        color: #22d3ee;
        cursor: pointer;
        transition: all 0.2s;
    }

    .var-badge:hover {
        background: rgba(34, 211, 238, 0.25);
        border-color: rgba(34, 211, 238, 0.5);
        transform: translateY(-1px);
    }
</style>